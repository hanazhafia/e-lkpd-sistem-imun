88% penyimpanan digunakan ‚Ä¶ Jika ruang penyimpanan sudah penuh, Anda tidak dapat membuat, mengedit, dan mengupload file. Dapatkan penyimpanan 30 GB seharga Rp 14.500 Rp 3.500/bln selama 3 bulan.
<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>E-LKPD Case Based Learning - Sistem Imun</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: 'Segoe UI', Tahoma, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
    .container { max-width: 900px; margin: 0 auto; }
    .header { background: white; border-radius: 20px; padding: 30px; text-align: center; margin-bottom: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.2); }
    .header h1 { color: #5a3d7a; font-size: 1.8em; margin-bottom: 10px; }
    .header p { color: #666; }
    .badge { display: inline-block; background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 5px 15px; border-radius: 20px; font-size: 0.85em; margin: 5px; }
    .nav { display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; margin-bottom: 20px; }
    .nav-btn { padding: 12px 20px; border: none; border-radius: 25px; cursor: pointer; font-weight: 600; transition: all 0.3s; background: white; color: #5a3d7a; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
    .nav-btn:hover, .nav-btn.active { background: linear-gradient(135deg, #667eea, #764ba2); color: white; transform: translateY(-2px); }
    .section { background: white; border-radius: 20px; padding: 25px; margin-bottom: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.1); display: none; }
    .section.active { display: block; animation: fadeIn 0.5s; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    h2 { color: #5a3d7a; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 3px solid #667eea; }
    h3 { color: #764ba2; margin: 20px 0 10px; }
    h4 { color: #5a3d7a; margin: 15px 0 10px; }
    .info-box { background: linear-gradient(135deg, #e8f4f8, #f0e6ff); padding: 15px; border-radius: 12px; margin: 15px 0; border-left: 4px solid #667eea; }
    .warning-box { background: #fff3cd; padding: 15px; border-radius: 12px; margin: 15px 0; border-left: 4px solid #ffc107; }
    .success-box { background: #d4edda; padding: 15px; border-radius: 12px; margin: 15px 0; border-left: 4px solid #28a745; }
    table { width: 100%; border-collapse: collapse; margin: 15px 0; font-size: 0.9em; }
    th, td { padding: 12px; text-align: left; border: 1px solid #ddd; }
    th { background: linear-gradient(135deg, #667eea, #764ba2); color: white; }
    tr:nth-child(even) { background: #f8f9fa; }
    tr:hover { background: #e8f4f8; }
    .video-container { position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; border-radius: 12px; margin: 15px 0; }
    .video-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
    .input-group { margin: 15px 0; }
    .input-group label { display: block; font-weight: 600; color: #5a3d7a; margin-bottom: 8px; }
    .input-group input, .input-group textarea { width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 10px; font-size: 1em; transition: border-color 0.3s; }
    .input-group input:focus, .input-group textarea:focus { outline: none; border-color: #667eea; }
    textarea { min-height: 100px; resize: vertical; font-family: 'Segoe UI', Tahoma, sans-serif; }
    .btn { padding: 12px 25px; border: none; border-radius: 25px; cursor: pointer; font-weight: 600; margin: 5px; transition: all 0.3s; }
    .btn-primary { background: linear-gradient(135deg, #667eea, #764ba2); color: white; }
    .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 5px 20px rgba(102,126,234,0.4); }
    .btn-success { background: linear-gradient(135deg, #28a745, #20c997); color: white; }
    .btn-danger { background: linear-gradient(135deg, #dc3545, #c82333); color: white; }
    .floating-buttons { position: fixed; bottom: 20px; right: 20px; display: flex; flex-direction: column; gap: 10px; z-index: 1000; }
    .floating-btn { padding: 15px 25px; border-radius: 50px; box-shadow: 0 5px 20px rgba(0,0,0,0.3); border: none; cursor: pointer; font-weight: 600; transition: all 0.3s; }
    .floating-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(0,0,0,0.4); }
    .link-box { display: flex; flex-wrap: wrap; gap: 10px; margin: 15px 0; }
    .link-btn { display: inline-flex; align-items: center; gap: 8px; padding: 10px 15px; background: #f8f9fa; border-radius: 10px; text-decoration: none; color: #5a3d7a; transition: all 0.3s; border: 2px solid #ddd; }
    .link-btn:hover { background: #667eea; color: white; border-color: #667eea; }
    .tahap { background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 8px 15px; border-radius: 20px; display: inline-block; margin-bottom: 10px; font-weight: 600; }
    .graph-container { background: #f8f9fa; padding: 20px; border-radius: 12px; margin: 15px 0; font-family: monospace; white-space: pre; overflow-x: auto; }
    .accordion { background: #f8f9fa; border-radius: 12px; margin: 10px 0; overflow: hidden; }
    .accordion-header { padding: 15px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; font-weight: 600; color: #5a3d7a; }
    .accordion-header:hover { background: #e8f4f8; }
    .accordion-content { padding: 0 15px; max-height: 0; overflow: hidden; transition: all 0.3s; }
    .accordion.open .accordion-content { max-height: 2000px; padding: 15px; }
    .accordion-icon { transition: transform 0.3s; }
    .accordion.open .accordion-icon { transform: rotate(180deg); }
    .identity-form { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; }
    .progress-indicator { background: white; padding: 15px; border-radius: 12px; margin-bottom: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); text-align: center; }
    .progress-bar { height: 8px; background: #e0e0e0; border-radius: 4px; margin: 10px 0; overflow: hidden; }
    .progress-fill { height: 100%; background: linear-gradient(90deg, #667eea, #764ba2); border-radius: 4px; transition: width 0.5s; width: 0%; }
    ul, ol { margin-left: 20px; margin-bottom: 15px; }
    li { margin-bottom: 8px; line-height: 1.6; }
    p { line-height: 1.7; margin-bottom: 10px; }
    .answer-display { background: #f8f9fa; padding: 10px; border-radius: 8px; margin-top: 5px; border-left: 3px solid #667eea; min-height: 20px; }
    @media print {
      body { background: white; padding: 0; }
      .nav, .floating-buttons { display: none !important; }
      .section { display: block !important; page-break-after: always; box-shadow: none; }
      .video-container { display: none; }
      .link-box { display: none; }
      .accordion-content { max-height: none !important; padding: 15px !important; }
      .accordion { page-break-inside: avoid; }
    }
    @media (max-width: 768px) {
      .header h1 { font-size: 1.4em; }
      .nav-btn { padding: 10px 15px; font-size: 0.9em; }
      table { font-size: 0.8em; }
      th, td { padding: 8px; }
      .floating-buttons { bottom: 10px; right: 10px; }
      .floating-btn { padding: 12px 20px; font-size: 0.9em; }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>üìö E-LKPD CASE BASED LEARNING</h1>
      <p>Materi: Kelainan dan Gangguan Sistem Imun</p>
      <div>
        <span class="badge">Kelas XI SMA</span>
        <span class="badge">Fase F Kurikulum Merdeka</span>
      </div>
    </div>

    <div class="progress-indicator">
      <div style="font-weight: 600; color: #5a3d7a; margin-bottom: 5px;">Progress Pengerjaan</div>
      <div class="progress-bar">
        <div class="progress-fill" id="progressBar"></div>
      </div>
      <div id="progressText" style="color: #666; font-size: 0.9em; margin-top: 5px;">0% selesai</div>
    </div>

    <nav class="nav">
      <button class="nav-btn active" onclick="showSection('identitas')">üìù Identitas</button>
      <button class="nav-btn" onclick="showSection('konsep')">üìñ Konsep</button>
      <button class="nav-btn" onclick="showSection('kasus1')">üî¨ Kasus 1</button>
      <button class="nav-btn" onclick="showSection('kasus2')">üß¨ Kasus 2</button>
      <button class="nav-btn" onclick="showSection('kasus3')">ü¶† Kasus 3</button>
    </nav>

    <!-- IDENTITAS -->
    <div id="identitas" class="section active">
      <h2>üìù Identitas Peserta Didik</h2>
      <div class="info-box">
        <strong>Capaian Pembelajaran:</strong><br>
        Peserta didik mampu menganalisis keterkaitan struktur organ pada sistem organ dengan fungsinya serta kelainan atau gangguan yang muncul pada sistem organ tersebut (Sistem Imun).
      </div>
      <div class="identity-form">
        <div class="input-group">
          <label>Nama Lengkap *</label>
          <input type="text" id="nama" placeholder="Masukkan nama..." required>
        </div>
        <div class="input-group">
          <label>Kelas *</label>
          <input type="text" id="kelas" placeholder="Contoh: XI MIPA 1" required>
        </div>
        <div class="input-group">
          <label>Kelompok *</label>
          <input type="text" id="kelompok" placeholder="Contoh: Kelompok 3" required>
        </div>
        <div class="input-group">
          <label>Tanggal *</label>
          <input type="date" id="tanggal" required>
        </div>
      </div>
      
      <h3>üéØ Tujuan Pembelajaran</h3>
      <ol>
        <li>Menganalisis data numerik terkait gangguan sistem imun</li>
        <li>Menginterpretasikan grafik dan tabel hasil pemeriksaan imunologis</li>
        <li>Menghubungkan data kuantitatif dengan kondisi fisiologis tubuh</li>
        <li>Menyusun kesimpulan berdasarkan bukti numerik</li>
      </ol>
      
      <div class="success-box">
        <strong>üìå Petunjuk:</strong> Isi identitas, pelajari konsep dasar, lalu kerjakan setiap kasus secara berurutan bersama kelompokmu! Jawaban akan tersimpan otomatis dan bisa didownload.
      </div>
    </div>

    <!-- KONSEP SISTEM IMUN -->
    <div id="konsep" class="section">
      <h2>üìñ Konsep Dasar Sistem Imun</h2>
      
      <div class="video-container">
        <iframe src="https://www.youtube.com/embed/lXfEK8G8CUI" frameborder="0" allowfullscreen></iframe>
      </div>
      <p style="text-align:center; color:#666; font-size:0.9em;">Video: Sistem Imun Manusia</p>

      <div class="accordion open">
        <div class="accordion-header" onclick="toggleAccordion(this)">
          <span>üõ°Ô∏è A. Pengertian Sistem Imun</span>
          <span class="accordion-icon">‚ñº</span>
        </div>
        <div class="accordion-content">
          <p>Sistem imun adalah sistem pertahanan tubuh yang berfungsi melindungi organisme dari berbagai agen penyebab penyakit (patogen) seperti bakteri, virus, jamur, dan parasit.</p>
        </div>
      </div>

      <div class="accordion">
        <div class="accordion-header" onclick="toggleAccordion(this)">
          <span>üî¨ B. Komponen Sistem Imun</span>
          <span class="accordion-icon">‚ñº</span>
        </div>
        <div class="accordion-content">
          <h4>1. Sistem Imun Nonspesifik</h4>
          <ul>
            <li><strong>Pertahanan Fisik:</strong> Kulit, membran mukosa, silia</li>
            <li><strong>Pertahanan Kimia:</strong> Asam lambung, lisozim, sebum</li>
            <li><strong>Sel Fagosit:</strong> Makrofag, neutrofil, sel dendritik</li>
          </ul>
          
          <h4>2. Sistem Imun Spesifik</h4>
          <ul>
            <li><strong>Limfosit B:</strong> Menghasilkan antibodi</li>
            <li><strong>Limfosit T:</strong> Menghancurkan sel terinfeksi</li>
          </ul>
        </div>
      </div>

      <div class="accordion">
        <div class="accordion-header" onclick="toggleAccordion(this)">
          <span>üíâ C. Jenis-Jenis Antibodi</span>
          <span class="accordion-icon">‚ñº</span>
        </div>
        <div class="accordion-content">
          <table>
            <tr><th>Antibodi</th><th>Fungsi Utama</th><th>Lokasi</th></tr>
            <tr><td><strong>IgG</strong></td><td>Antibodi utama, menembus plasenta</td><td>Darah, jaringan</td></tr>
            <tr><td><strong>IgA</strong></td><td>Pertahanan mukosa</td><td>Saliva, ASI</td></tr>
            <tr><td><strong>IgM</strong></td><td>Respon primer pertama</td><td>Darah</td></tr>
            <tr><td><strong>IgE</strong></td><td>Reaksi alergi</td><td>Kulit, saluran napas</td></tr>
          </table>
        </div>
      </div>

      <div class="accordion">
        <div class="accordion-header" onclick="toggleAccordion(this)">
          <span>‚ö†Ô∏è D. Gangguan Sistem Imun</span>
          <span class="accordion-icon">‚ñº</span>
        </div>
        <div class="accordion-content">
          <table>
            <tr><th>Jenis Gangguan</th><th>Contoh</th><th>Ciri Khas</th></tr>
            <tr><td><strong>Alergi</strong></td><td>Asma, gatal-gatal</td><td>Reaksi berlebihan</td></tr>
            <tr><td><strong>Autoimun</strong></td><td>Lupus, Diabetes tipe 1</td><td>Menyerang sel sendiri</td></tr>
            <tr><td><strong>Imunodefisiensi</strong></td><td>HIV/AIDS</td><td>Sistem imun lemah</td></tr>
          </table>
        </div>
      </div>

      <div class="accordion">
        <div class="accordion-header" onclick="toggleAccordion(this)">
          <span>üî¨ E. Cara Membaca Hasil Lab</span>
          <span class="accordion-icon">‚ñº</span>
        </div>
        <div class="accordion-content">
          <h4>üìå Sel Darah Putih (Leukosit)</h4>
          <div class="info-box">
            <p><strong>Nilai Normal:</strong> 5.000-10.000 sel/mm¬≥</p>
            <p><strong>Jika Tinggi:</strong> Ada infeksi atau peradangan</p>
            <p><strong>Jika Rendah:</strong> Sistem imun lemah</p>
          </div>

          <h4>üìå Antibodi IgE</h4>
          <div class="info-box">
            <p><strong>Normal:</strong> &lt; 100 IU/mL</p>
            <p><strong>Tinggi:</strong> Indikasi alergi</p>
          </div>

          <h4>üìå Sel CD4 (HIV)</h4>
          <div class="info-box">
            <p><strong>Normal:</strong> 500-1500 sel/mm¬≥</p>
            <p><strong>&lt; 200:</strong> AIDS (sistem imun sangat lemah)</p>
          </div>
        </div>
      </div>
    </div>

    <!-- KASUS 1: ALERGI -->
    <div id="kasus1" class="section">
      <h2>üî¨ Kasus 1: Reaksi Alergi</h2>
      
      <div class="warning-box">
        <strong>üìö Istilah Penting:</strong>
        <ul style="margin-top:10px;">
          <li><strong>IgE:</strong> Antibodi alergi (tinggi = reaksi berlebihan)</li>
          <li><strong>Histamin:</strong> Penyebab gatal, bengkak, sesak</li>
          <li><strong>Eosinofil:</strong> Sel darah putih yang naik saat alergi</li>
        </ul>
      </div>

      <span class="tahap">TAHAP 1: Menetapkan Kasus</span>
      <div class="info-box">
        <h4>üìã Narasi Kasus</h4>
        <p><strong>Identitas:</strong> Rina, 16 tahun, siswi SMA</p>
        <p><strong>Keluhan:</strong> Setelah makan udang, Rina mengalami gatal-gatal, bibir bengkak, dan kesulitan bernapas.</p>
      </div>

      <h4>üìä Data Laboratorium</h4>
      <table>
        <tr><th>Parameter</th><th>Hasil Rina</th><th>Normal</th></tr>
        <tr><td>IgE Total</td><td style="color:red; font-weight:bold;">850 IU/mL</td><td>&lt; 100 IU/mL</td></tr>
        <tr><td>Eosinofil</td><td style="color:red; font-weight:bold;">12%</td><td>1-4%</td></tr>
        <tr><td>Histamin</td><td style="color:red; font-weight:bold;">85 ng/mL</td><td>&lt; 10 ng/mL</td></tr>
      </table>

      <span class="tahap">TAHAP 2-7: Analisis dan Jawaban</span>
      
      <div class="input-group">
        <label>1. Identifikasi gejala utama yang dialami Rina!</label>
        <textarea id="k1q1" placeholder="Tuliskan gejala..."></textarea>
      </div>

      <div class="input-group">
        <label>2. Berapa kali lipat kadar IgE Rina dibandingkan batas normal? (850 √∑ 100)</label>
        <input type="text" id="k1q2" placeholder="...kali lipat">
      </div>

      <div class="input-group">
        <label>3. Hitung peningkatan kadar histamin jika di awal 20 ng/mL dan puncak 85 ng/mL</label>
        <input type="text" id="k1q3" placeholder="85 - 20 = ... ng/mL">
      </div>

      <div class="input-group">
        <label>4. Jelaskan mengapa kadar IgE meningkat pada penderita alergi!</label>
        <textarea id="k1q4" placeholder="Penjelasan..."></textarea>
      </div>

      <div class="input-group">
        <label>5. Jika setelah 5 jam pengobatan histamin turun ke 8 ng/mL, hitung persentase penurunannya dari 85 ng/mL!</label>
        <input type="text" id="k1q5" placeholder="[(85-8) √∑ 85] √ó 100% = ...%">
      </div>

      <div class="input-group">
        <label>6. Hubungkan kadar IgE tinggi dengan gejala yang dialami Rina!</label>
        <textarea id="k1q6" placeholder="Hubungan antara data dan gejala..."></textarea>
      </div>

      <div class="input-group">
        <label>7. Kesimpulan dan rekomendasi untuk Rina</label>
        <textarea id="k1q7" placeholder="Kesimpulan dan saran..."></textarea>
      </div>

      <div class="input-group">
        <label>8. Refleksi: Apa yang dipelajari dari kasus ini?</label>
        <textarea id="k1q8" placeholder="Refleksi pembelajaran..."></textarea>
      </div>
    </div>

    <!-- KASUS 2: AUTOIMUN -->
    <div id="kasus2" class="section">
      <h2>üß¨ Kasus 2: Lupus (Autoimun)</h2>
      
      <div class="warning-box">
        <strong>üìö Istilah Penting:</strong>
        <ul style="margin-top:10px;">
          <li><strong>Autoimun:</strong> Sistem imun menyerang sel tubuh sendiri</li>
          <li><strong>Lupus:</strong> Menyerang kulit, sendi, ginjal</li>
          <li><strong>SLEDAI Score:</strong> Ukuran aktivitas penyakit (tinggi = parah)</li>
        </ul>
      </div>

      <span class="tahap">TAHAP 1: Menetapkan Kasus</span>
      <div class="info-box">
        <h4>üìã Narasi Kasus</h4>
        <p><strong>Identitas:</strong> Dewi, 17 tahun</p>
        <p><strong>Keluhan:</strong> Nyeri sendi, ruam kupu-kupu di wajah, mudah lelah (3 bulan)</p>
      </div>

      <h4>üìä Data Laboratorium</h4>
      <table>
        <tr><th>Parameter</th><th>Hasil</th><th>Normal</th></tr>
        <tr><td>Antibodi Anti-Inti</td><td style="color:red;">Positif tinggi</td><td>Negatif</td></tr>
        <tr><td>C3 (Protein)</td><td style="color:red;">45 mg/dL</td><td>90-180</td></tr>
        <tr><td>C4 (Protein)</td><td style="color:red;">8 mg/dL</td><td>16-47</td></tr>
        <tr><td>LED</td><td style="color:red;">65 mm/jam</td><td>&lt; 20</td></tr>
      </table>

      <span class="tahap">TAHAP 2-7: Analisis</span>

      <div class="input-group">
        <label>1. Hitung persen penurunan C3 dari batas normal terendah (90 mg/dL)!</label>
        <input type="text" id="k2q1" placeholder="[(90-45) √∑ 90] √ó 100% = ...%">
      </div>

      <div class="input-group">
        <label>2. Jika SLEDAI Score Dewi: Jan=5, Feb=20, Mar=15, Apr=10, Mei=10, Jun=15, Jul=5. Hitung rata-ratanya!</label>
        <input type="text" id="k2q2" placeholder="(...) √∑ 7 = ...">
      </div>

      <div class="input-group">
        <label>3. Berapa bulan kondisi remisi (SLEDAI &lt; 6)?</label>
        <input type="text" id="k2q3" placeholder="... bulan">
      </div>

      <div class="input-group">
        <label>4. Mengapa C3 dan C4 menurun pada lupus?</label>
        <textarea id="k2q4" placeholder="Penjelasan..."></textarea>
      </div>

      <div class="input-group">
        <label>5. Jika tanpa obat rata-rata SLEDAI=20, dengan obat=9. Berapa persen penurunannya?</label>
        <input type="text" id="k2q5" placeholder="[(20-9) √∑ 20] √ó 100% = ...%">
      </div>

      <div class="input-group">
        <label>6. Evaluasi efektivitas pengobatan berdasarkan data!</label>
        <textarea id="k2q6" placeholder="Evaluasi..."></textarea>
      </div>

      <div class="input-group">
        <label>7. Kesimpulan kasus lupus</label>
        <textarea id="k2q7" placeholder="Kesimpulan..."></textarea>
      </div>

      <div class="input-group">
        <label>8. Refleksi pembelajaran</label>
        <textarea id="k2q8" placeholder="Refleksi..."></textarea>
      </div>
    </div>

    <!-- KASUS 3: HIV/AIDS -->
    <div id="kasus3" class="section">
      <h2>ü¶† Kasus 3: HIV/AIDS</h2>
      
      <div class="warning-box">
        <strong>üìö Istilah Penting:</strong>
        <ul style="margin-top:10px;">
          <li><strong>HIV:</strong> Virus yang menyerang sistem imun</li>
          <li><strong>CD4:</strong> Sel komandan imun (target HIV)</li>
          <li><strong>ARV:</strong> Obat untuk menekan virus</li>
          <li><strong>AIDS:</strong> Kondisi CD4 &lt; 200 sel/mm¬≥</li>
        </ul>
      </div>

      <span class="tahap">TAHAP 1: Data Epidemiologi</span>

      <h4>üìä Data HIV Indonesia 2020-2024</h4>
      <table>
        <tr><th>Tahun</th><th>Kasus Baru</th><th>Kumulatif</th></tr>
        <tr><td>2020</td><td>41.987</td><td>543.100</td></tr>
        <tr><td>2021</td><td>36.902</td><td>580.002</td></tr>
        <tr><td>2022</td><td>42.512</td><td>622.514</td></tr>
        <tr><td>2023</td><td>45.127</td><td>667.641</td></tr>
        <tr><td>2024</td><td>48.320</td><td>715.961</td></tr>
      </table>

      <span class="tahap">TAHAP 2-7: Analisis</span>

      <div class="input-group">
        <label>1. Hitung peningkatan kumulatif dari 2020 ke 2024!</label>
        <input type="text" id="k3q1" placeholder="715.961 - 543.100 = ...">
      </div>

      <div class="input-group">
        <label>2. Hitung rata-rata kasus baru per tahun!</label>
        <input type="text" id="k3q2" placeholder="(...) √∑ 5 = ...">
      </div>

      <div class="input-group">
        <label>3. Jika CD4 awal 100, setelah 24 bulan ARV jadi 500. Berapa persen peningkatannya?</label>
        <input type="text" id="k3q3" placeholder="[(500-100) √∑ 100] √ó 100% = ...%">
      </div>

      <div class="input-group">
        <label>4. Pada bulan ke berapa CD4 melewati batas AIDS (200)? (Grafik: bulan 0=100, 6=200, 12=300, 24=500)</label>
        <input type="text" id="k3q4" placeholder="Bulan ke-...">
      </div>

      <div class="input-group">
        <label>5. Bandingkan CD4 dengan ARV (500) vs tanpa ARV (50) setelah 2 tahun. Berapa kali lipatnya?</label>
        <input type="text" id="k3q5" placeholder="500 √∑ 50 = ...">
      </div>

      <div class="input-group">
        <label>6. Mengapa persentase pasien CD4 &lt; 200 menurun (35% ‚Üí 22%)?</label>
        <textarea id="k3q6" placeholder="Analisis..."></textarea>
      </div>

      <div class="input-group">
        <label>7. Evaluasi efektivitas terapi ARV berdasarkan data numerik!</label>
        <textarea id="k3q7" placeholder="Evaluasi..."></textarea>
      </div>

      <div class="input-group">
        <label>8. Pesan kesehatan untuk pencegahan HIV/AIDS</label>
        <textarea id="k3q8" placeholder="Pesan kesehatan..."></textarea>
      </div>

      <div class="success-box">
        <h4>üéâ Selamat!</h4>
        <p>Kamu telah menyelesaikan semua kasus. Klik tombol <strong>"üì• Download Jawaban"</strong> untuk menyimpan hasil pekerjaanmu!</p>
      </div>
    </div>
  </div>

  <div class="floating-buttons">
    <button class="floating-btn btn-success" onclick="downloadAnswers()">üì• Download Jawaban</button>
    <button class="floating-btn btn-primary" onclick="window.print()">üñ®Ô∏è Cetak</button>
    <button class="floating-btn btn-danger" onclick="resetAll()">üîÑ Reset Semua</button>
  </div>

  <script>
    // Fungsi untuk menampilkan section
    function showSection(id) {
      document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
      document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      event.target.classList.add('active');
      window.scrollTo({top: 0, behavior: 'smooth'});
      saveProgress();
    }

    // Toggle accordion
    function toggleAccordion(el) {
      el.parentElement.classList.toggle('open');
    }

    // Hitung progress
    function updateProgress() {
      const inputs = document.querySelectorAll('input[type="text"], input[type="date"], textarea');
      let filled = 0;
      inputs.forEach(input => {
        if (input.value.trim() !== '') filled++;
      });
      const percent = Math.round((filled / inputs.length) * 100);
      document.getElementById('progressBar').style.width = percent + '%';
      document.getElementById('progressText').textContent = percent + '% selesai (' + filled + '/' + inputs.length + ' pertanyaan)';
    }

    // Simpan progress ke localStorage
    function saveProgress() {
      const data = {};
      document.querySelectorAll('input, textarea').forEach(el => {
        if (el.id) data[el.id] = el.value;
      });
      localStorage.setItem('elkpd_progress', JSON.stringify(data));
      updateProgress();
    }

    // Load progress dari localStorage
    function loadProgress() {
      const saved = localStorage.getItem('elkpd_progress');
      if (saved) {
        const data = JSON.parse(saved);
        Object.keys(data).forEach(key => {
          const el = document.getElementById(key);
          if (el) el.value = data[key];
        });
        updateProgress();
      }
    }

    // Download jawaban sebagai HTML yang rapi
    function downloadAnswers() {
      const nama = document.getElementById('nama').value || 'Siswa';
      const kelas = document.getElementById('kelas').value || '-';
      const kelompok = document.getElementById('kelompok').value || '-';
      const tanggal = document.getElementById('tanggal').value || '-';

      if (!nama || nama === 'Siswa') {
        alert('‚ö†Ô∏è Mohon isi identitas terlebih dahulu (Nama, Kelas, Kelompok)!');
        return;
      }

      let html = `
<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LKPD - ${nama}</title>
  <style>
    body { font-family: 'Segoe UI', Tahoma, sans-serif; max-width: 800px; margin: 20px auto; padding: 20px; line-height: 1.6; }
    .header { text-align: center; border-bottom: 3px solid #667eea; padding-bottom: 20px; margin-bottom: 30px; }
    .header h1 { color: #5a3d7a; margin-bottom: 10px; }
    .identity { background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 30px; }
    .identity table { width: 100%; }
    .identity td { padding: 8px; }
    .identity td:first-child { font-weight: 600; width: 150px; color: #5a3d7a; }
    .case { margin-bottom: 40px; page-break-inside: avoid; }
    .case h2 { color: #667eea; border-bottom: 2px solid #667eea; padding-bottom: 10px; margin-bottom: 20px; }
    .question { margin-bottom: 25px; page-break-inside: avoid; }
    .question-label { font-weight: 600; color: #5a3d7a; margin-bottom: 8px; }
    .answer { background: #f8f9fa; padding: 12px; border-radius: 6px; border-left: 4px solid #667eea; min-height: 30px; white-space: pre-wrap; }
    .empty { color: #999; font-style: italic; }
    @media print {
      body { margin: 0; padding: 15px; }
      .case { page-break-after: always; }
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>üìö E-LKPD CASE BASED LEARNING</h1>
    <p>Kelainan dan Gangguan Sistem Imun</p>
    <p style="color: #666; font-size: 0.9em;">Kelas XI SMA - Fase F Kurikulum Merdeka</p>
  </div>

  <div class="identity">
    <table>
      <tr><td>Nama</td><td>: ${nama}</td></tr>
      <tr><td>Kelas</td><td>: ${kelas}</td></tr>
      <tr><td>Kelompok</td><td>: ${kelompok}</td></tr>
      <tr><td>Tanggal</td><td>: ${tanggal}</td></tr>
    </table>
  </div>

  <div class="case">
    <h2>üî¨ KASUS 1: Reaksi Alergi pada Remaja</h2>
    ${generateQuestions('k1', 8, [
      'Identifikasi gejala utama yang dialami Rina',
      'Berapa kali lipat kadar IgE Rina dibandingkan batas normal?',
      'Hitung peningkatan kadar histamin',
      'Jelaskan mengapa kadar IgE meningkat pada penderita alergi',
      'Hitung persentase penurunan histamin setelah pengobatan',
      'Hubungkan kadar IgE tinggi dengan gejala yang dialami',
      'Kesimpulan dan rekomendasi',
      'Refleksi pembelajaran'
    ])}
  </div>

  <div class="case">
    <h2>üß¨ KASUS 2: Penyakit Autoimun (Lupus)</h2>
    ${generateQuestions('k2', 8, [
      'Hitung persen penurunan C3 dari batas normal',
      'Hitung rata-rata SLEDAI Score',
      'Berapa bulan kondisi remisi?',
      'Mengapa C3 dan C4 menurun pada lupus?',
      'Hitung persen penurunan SLEDAI dengan pengobatan',
      'Evaluasi efektivitas pengobatan',
      'Kesimpulan kasus lupus',
      'Refleksi pembelajaran'
    ])}
  </div>

  <div class="case">
    <h2>ü¶† KASUS 3: HIV/AIDS dan Imunodefisiensi</h2>
    ${generateQuestions('k3', 8, [
      'Hitung peningkatan kumulatif kasus HIV 2020-2024',
      'Hitung rata-rata kasus baru per tahun',
      'Hitung persen peningkatan CD4 dengan ARV',
      'Pada bulan ke berapa CD4 melewati batas AIDS?',
      'Bandingkan CD4 dengan vs tanpa ARV',
      'Mengapa persentase CD4 < 200 menurun?',
      'Evaluasi efektivitas terapi ARV',
      'Pesan kesehatan pencegahan HIV/AIDS'
    ])}
  </div>

  <div style="text-align: center; margin-top: 50px; padding-top: 20px; border-top: 2px solid #ddd; color: #666;">
    <p>Dokumen ini dibuat otomatis dari E-LKPD Interaktif</p>
    <p style="font-size: 0.9em;">Tanggal download: ${new Date().toLocaleDateString('id-ID')}</p>
  </div>
</body>
</html>`;

      // Download file
      const blob = new Blob([html], { type: 'text/html' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `LKPD_${nama.replace(/\s+/g, '_')}_${kelas.replace(/\s+/g, '_')}.html`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);

      alert('‚úÖ Jawaban berhasil didownload!\n\nFile HTML dapat dibuka di browser atau diconvert ke PDF.');
    }

    function generateQuestions(prefix, count, labels) {
      let html = '';
      for (let i = 1; i <= count; i++) {
        const answer = document.getElementById(prefix + 'q' + i)?.value || '';
        html += `
    <div class="question">
      <div class="question-label">${i}. ${labels[i-1]}</div>
      <div class="answer ${answer ? '' : 'empty'}">${answer || '(Belum dijawab)'}</div>
    </div>`;
      }
      return html;
    }

    // Reset semua jawaban
    function resetAll() {
      if (confirm('‚ö†Ô∏è Yakin ingin menghapus SEMUA jawaban? Data tidak bisa dikembalikan!')) {
        localStorage.removeItem('elkpd_progress');
        document.querySelectorAll('input, textarea').forEach(el => el.value = '');
        document.getElementById('tanggal').valueAsDate = new Date();
        updateProgress();
        alert('‚úÖ Semua jawaban telah dihapus!');
      }
    }

    // Event listeners
    document.querySelectorAll('input, textarea').forEach(el => {
      el.addEventListener('input', saveProgress);
      el.addEventListener('change', saveProgress);
    });

    // Set tanggal default dan load progress
    document.getElementById('tanggal').valueAsDate = new Date();
    window.addEventListener('load', () => {
      loadProgress();
      updateProgress();
    });

    // Auto-save setiap 30 detik
    setInterval(saveProgress, 30000);
  </script>
</body>
</html>
